<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {'packages':['sankey']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
      // Updated data from Reliance Industries Limited Integrated Annual Report 2024-25
      // Segment net revenues flowing to Total Revenue (INR crores, FY 2024-25)
      var rawData = {
        "cols": [{"id":"From","label":"From","type":"string"},{"id":"To","label":"To","type":"string"},{"id":"Weight","label":"Weight","type":"number"}],
        "rows": [
          {"c":[{"v":"Oil to Chemicals (O2C)"},{"v":"Total Revenue"},{"v":605006}]},
          {"c":[{"v":"Retail"},{"v":"Total Revenue"},{"v":291043}]},
          {"c":[{"v":"Digital Services"},{"v":"Total Revenue"},{"v":131336}]},
          {"c":[{"v":"Media & Entertainment"},{"v":"Total Revenue"},{"v":20696}]},
          {"c":[{"v":"Oil and Gas"},{"v":"Total Revenue"},{"v":24881}]},
          {"c":[{"v":"Others"},{"v":"Total Revenue"},{"v":49749}]}
        ]
      };

      // No self-loops in this data, so no filtering needed
      var filteredRows = rawData.rows;

      // Build DataTable
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'From');
      data.addColumn('string', 'To');
      data.addColumn('number', 'Weight');
      filteredRows.forEach(function(row) {
        data.addRow([row.c[0].v, row.c[1].v, row.c[2].v]);
      });

      var options = {
        width: '100%',
        height: '100%',
        backgroundColor: 'black',
        fontName: 'Arial',
        fontSize: 12,
        sankey: {
          node: {
            label: {
              fontName: 'Arial',
              fontSize: 14,
              bold: true,
              color: 'white'
            },
            width: 40,
            nodePadding: 10,
            interNodeSpace: 5,
            color: '#ddd'
          },
          link: {
            color: '#ccc'
          }
        },
        chartArea: {
          top: '5%',
          width: '100%',
          height: '95%'
        }
      };

      var chart = new google.visualization.Sankey(document.getElementById('sankey_basic'));

      const chartContainer = document.getElementById('chart-container');
      chartContainer.style.width = '100vw';
      chartContainer.style.height = '90vh';
      
      chart.draw(data, options);

      window.addEventListener('resize', () => {
        chart.draw(data, options);
      });
    }
  </script>
  <style>
    body {
      margin: 0;
      background-color: black;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #chart-container {
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: black;
    }
    #sankey_basic {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="chart-container">
    <div id="sankey_basic"></div>
  </div>
</body>
</html>
